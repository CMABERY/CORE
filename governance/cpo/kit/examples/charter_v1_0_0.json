{
  "protocol_version": "cpo-contracts@0.1.0",
  "semver": "1.0.0",
  "definitions": {
    "dedup_key": {
      "text": "Deterministic idempotency key used for drift emission.",
      "status": "active"
    },
    "Canonical Artifact": {
      "text": "Only canonical artifacts are operational memory.",
      "status": "active"
    }
  },
  "mode_policy": {
    "allowed_actions_all_modes": [
      "EXPORT_EVIDENCE_PACK",
      "SYSTEM_EMIT_DRIFT_EVENT"
    ],
    "allowed_actions_by_mode": {
      "Explore": [
        "CREATE_DECISION",
        "CREATE_ASSUMPTION",
        "CREATE_EXCEPTION",
        "CHANGE_MODE"
      ],
      "Execute": [
        "CREATE_DECISION",
        "CHANGE_MODE"
      ]
    },
    "allowed_transitions": {
      "Explore": [
        "Evaluate",
        "Decide",
        "Execute",
        "Reflect"
      ],
      "Execute": [
        "Reflect"
      ],
      "Reflect": [
        "Explore",
        "Execute"
      ]
    },
    "emergency": {
      "max_hours": 8,
      "must_exit_to": "Reflect"
    }
  },
  "policy_checks": {
    "GATE-CHANGE-CONTROL": {
      "allow_exception": false,
      "severity": "block",
      "description": "Charter activation requires meta-rules and change log."
    },
    "GATE-DECISION-COMPLETENESS": {
      "allow_exception": true,
      "severity": "block",
      "description": "Decisions require rollback + success criteria (policy-level)."
    }
  },
  "invariants": [
    {
      "id": "INV-001",
      "allow_exception": true,
      "applies_to": [
        "CREATE_DECISION"
      ],
      "rule": {
        "not_empty": {
          "path": "/resources/decision/rollback_trigger"
        }
      }
    }
  ],
  "meta_rules": [
    {
      "id": "META-ETERNITY-001",
      "allow_exception": false,
      "applies_to": [
        "ACTIVATE_CHARTER"
      ],
      "rule": {
        "exists": {
          "path": "/resolved/charter/charter/policy_checks/GATE-CHANGE-CONTROL"
        }
      }
    }
  ]
}